(this["webpackJsonpvaccine-tracker"]=this["webpackJsonpvaccine-tracker"]||[]).push([[0],{13:function(t,e,i){},20:function(t,e,i){},42:function(t,e,i){"use strict";i.r(e);var s=i(2),a=i.n(s),n=i(14),c=i.n(n),r=(i(20),i(4)),l=i(5),o=i(7),d=i(6),h=(i(13),i(12)),j=i(1),b=function(t){Object(o.a)(i,t);var e=Object(d.a)(i);function i(){var t;Object(r.a)(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))).renderTableData=function(){return t.props.finalCenters.map((function(t){var e=t.name,i=t.address,s=t.pincode,a=t.availability_18,n=t.availability_45;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{style:{border:"1px solid white"},children:"".concat(e,", ").concat(i)}),Object(j.jsx)("td",{style:{border:"1px solid white"},children:s}),Object(j.jsxs)("td",{style:{border:"1px solid white"},children:[a&&Object(j.jsx)("tr",{children:Object(j.jsx)("td",{children:"18"})}),n&&Object(j.jsx)("tr",{children:Object(j.jsx)("td",{children:"45"})})]}),Object(j.jsxs)("td",{style:{border:"1px solid white"},children:[Object(j.jsx)("tr",{children:Object(j.jsx)("td",{children:a})}),Object(j.jsx)("tr",{style:{border:"1px solid white"},children:Object(j.jsx)("td",{children:n})})]})]})}))},t}return Object(l.a)(i,[{key:"render",value:function(){return Object(j.jsxs)("table",{id:"Centers",style:{border:"1px solid white"},children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Center"}),Object(j.jsx)("th",{children:"Pincode"}),Object(j.jsx)("th",{children:"Age"}),Object(j.jsx)("th",{children:"Available Capacity"})]})}),Object(j.jsx)("tbody",{children:this.renderTableData()})]})}}]),i}(s.Component),u=i(10),f=i.n(u),p=i.p+"static/media/tone.e69db03d.mp3",O=i(11);var v=function(t){var e=t.mute,i=t.onClick;return Object(j.jsx)("div",{className:"sound",children:Object(j.jsx)("button",{style:{backgroundColor:"#282c34"},onClick:i,children:e?Object(j.jsx)(O.a,{size:40,color:"white"}):Object(j.jsx)(O.b,{size:40,color:"white"})})})},x=function(t){Object(o.a)(i,t);var e=Object(d.a)(i);function i(t){var s;return Object(r.a)(this,i),(s=e.call(this,t)).getDistricts=function(){fetch("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+s.state.selectedState).then((function(t){return t.json()})).then((function(t){s.setState({districts:t})}))},s.checkAvailability=function(){var t=[],e=0,i=0,a=s.state.response;if(a){var n,c=Object(h.a)(a.centers);try{for(c.s();!(n=c.n()).done;){var r,l=n.value,o={name:l.name,address:l.address,pincode:l.pincode},d=Object(h.a)(l.sessions);try{for(d.s();!(r=d.n()).done;){var j=r.value;j.available_capacity>0&&s.state.ages.includes("".concat(j.min_age_limit))&&(j["available_capacity_dose".concat(s.state.doses[0])]||j["available_capacity_dose".concat(s.state.doses[1])])&&(18===j.min_age_limit?o.availability_18=0+j.available_capacity:o.availability_45=0+j.available_capacity)}}catch(b){d.e(b)}finally{d.f()}(o.availability_18||o.availability_45)&&t.push(o),e+=0,i+=0}}catch(b){c.e(b)}finally{c.f()}(t=t.sort((function(t,e){return(e.availability_18||e.availability_45)-(t.availability_45||t.availability_18)}))).length?(s.notifyMe(),s.setState({finalCenters:t,total_18:e,total_45:i,loading:!1})):s.setState({finalCenters:null,loading:!1})}},s.fetch=function(t){fetch("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id="+s.state.selectedDistrict+"&date="+t).then((function(t){return t.json()})).then((function(t){s.state.response=t,s.checkAvailability()}))},s.getSessions=function(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();if(t=e+"-"+i+"-"+a,s.state.start)var n=setInterval((function(){s.state.start?!(s.state.ages.includes(18)&&s.state.total_18>0||s.state.ages.includes(45)&&s.state.total_45>0)&&s.state.selectedDistrict.length>0&&(s.state.intervalId=s.fetch(t)):clearInterval(n)}),1e4);else s.setState({loading:!0}),s.fetch(t)},s.onStateChange=function(t){s.setState({selectedState:t.target.value,finalCenters:[],selectedDistrict:""},s.getDistricts),s.state.intervalId&&clearInterval(s.state.intervalId)},s.onDistrictChange=function(t){s.setState({selectedDistrict:t.target.value,finalCenters:[]},s.getSessions),s.state.intervalId&&clearInterval(s.state.intervalId)},s.playBeep=function(){s.state.mute||new Audio(p).play()},s.soundPress=function(){s.setState({mute:!s.state.mute})},s.notifyMe=function(){if(s.state.start){if(s.playBeep(),Notification)if("granted"!==Notification.permission)Notification.requestPermission();else try{new Notification("Slots Available",{icon:"https://socoemergency.org/wp-content/uploads/2020/11/icon-vaccine.png",body:"Vaccine Slots are avilable. Hurry up!"}).onclick=function(){window.focus(),this.close()}}catch(t){}else alert("Desktop notifications not available in your browser")}},s.start=function(){alert("Please keep notifications enabled"),s.setState({start:!0},s.getSessions)},s.stop=function(){s.setState({start:!1})},s.state={ages:["18","45"],doses:["1","2"],start:!1,mute:!1},s}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var t=this;fetch("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(t){return t.json()})).then((function(e){return t.setState({states:e})}))}},{key:"render",value:function(){var t=this,e=function(e){return Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",id:e,onChange:function(e){t.state.ages=e.target.checked?t.state.ages.concat(e.target.id):t.state.ages.filter((function(t){return t!==e.target.id})),t.checkAvailability()},defaultChecked:!0}),e]})},i=function(e){return Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",id:e,onChange:function(e){t.state.doses=e.target.checked?t.state.doses.concat(e.target.id):t.state.doses.filter((function(t){return t!==e.target.id})),t.checkAvailability()},defaultChecked:!0}),"Dose "+e]})};return Object(j.jsxs)("div",{children:[Object(j.jsx)(v,{mute:this.state.mute,onClick:this.soundPress}),Object(j.jsxs)("p",{children:[Object(j.jsx)("label",{children:"State "}),this.state&&this.state.states&&Object(j.jsxs)("select",{value:this.state.selectedState,onChange:this.onStateChange,children:[Object(j.jsx)("option",{selected:!0,children:"-------SELECT A STATE-------"}),this.state.states.states.map((function(t){return function(t){return Object(j.jsx)("option",{value:t.state_id,children:t.state_name})}(t)}))]})]}),Object(j.jsx)("p",{children:this.state&&this.state.states&&this.state.districts&&this.state.districts.districts&&Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"District "}),Object(j.jsxs)("select",{value:this.state.selectedDistrict,onChange:this.onDistrictChange,children:[Object(j.jsx)("option",{selected:!0,children:"-------SELECT A DISTRICT-------"}),this.state.districts.districts.map((function(t){return function(t){return Object(j.jsx)("option",{value:t.district_id,children:t.district_name})}(t)}))]})]})}),Object(j.jsxs)("p",{children:[Object(j.jsx)("label",{children:"Age "}),e("18"),e("45")]}),Object(j.jsxs)("p",{children:[i(1),Object(j.jsx)("br",{}),i(2)]}),this.state.ages&&this.state.selectedDistrict&&Object(j.jsx)("p",{children:this.state.start?Object(j.jsx)("button",{type:"button",onClick:this.stop,children:"Stop Notifier"}):Object(j.jsx)("button",{type:"button",onClick:this.start,children:"Start Notifier"})}),Object(j.jsx)("p",{children:this.state.loading?Object(j.jsx)(f.a,{type:"Bars",color:"#00BFFF",height:100,width:100,timeout:3e3}):this.state.selectedDistrict&&this.state.selectedDistrict.length>0&&(!this.state.finalCenters||this.state.finalCenters&&0===this.state.finalCenters.length)?this.state.start?Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Waiting for a slot to be available"}),Object(j.jsx)(f.a,{type:"Bars",color:"#00BFFF",height:100,width:100})]}):Object(j.jsx)("label",{children:"No slots available"}):this.state.finalCenters&&this.state.selectedDistrict.length>0&&Object(j.jsx)(b,{finalCenters:this.state.finalCenters})})]})}}]),i}(s.Component),g=i(9),y=i(15),m=function(t){Object(o.a)(i,t);var e=Object(d.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(l.a)(i,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)("h1",{children:"Vaccine Slot Tracker"}),Object(j.jsxs)("p",{children:[Object(j.jsx)("label",{style:{fontWeight:75,fontSize:20},children:"Find available slots for your vaccination. If there are no slots, don't worry! we've got your back. We'll notify when there are available slots."}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{style:{fontWeight:10,fontSize:20},children:"'Start Notifier' and make sure you don't close this tab."})]}),Object(j.jsx)("p",{children:Object(j.jsx)(x,{})}),Object(j.jsxs)("div",{className:"rightlogosection",children:[Object(j.jsx)("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScI3Ai-FIVnh1mocN16O56hz_Bd39O2YDxQDeKcIz5Vk_8jWw/viewform",className:"rightlogo",children:Object(j.jsx)(y.a,{size:20,color:"white"})}),Object(j.jsx)("a",{href:"https://github.com/SupriyaRaghunath/vaccine-tracker",target:"_blank",rel:"noopener noreferrer",className:"rightlogo",children:Object(j.jsx)(g.a,{size:20,color:"white"})})]})]})})}}]),i}(s.Component),C=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,43)).then((function(e){var i=e.getCLS,s=e.getFID,a=e.getFCP,n=e.getLCP,c=e.getTTFB;i(t),s(t),a(t),n(t),c(t)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(m,{})}),document.getElementById("root")),C()}},[[42,1,2]]]);
//# sourceMappingURL=main.3bd4ddcd.chunk.js.map